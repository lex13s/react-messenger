{"version":3,"sources":["components/Context/authContext/AuthContext.js","components/UI/Buttons/MainButton/MainButton.js","components/Auth/FormTabs/FormTabs.js","services/initFirebase.js","components/Firebase/Firebase.js","components/Context/preloaderContext/preloaderContext.js","components/hoc/wrapOverlay/wrapOverlay.js","components/UI/Modal/Modal.js","components/UI/Input/Input.js","components/UI/IconEye/Icon.js","components/hoc/withClass/withClass.js","components/hoc/Wrapper/Wrapper.js","components/Auth/FormLogin/FormLogin.js","components/Auth/FormRegister/FormRegister.js","components/Context/modalContext/modalContext.js","components/Auth/Auth.js","components/UI/Modal/ModalWithReducer.js","components/UI/Preloader/Preloader.js","components/Context/firebaseContext/FirebaseContext.js","components/Head/BtnComeBack/BtnComeBack.js","components/Head/Avatar/Avatar.js","components/Head/UserName/UserName.js","components/Status/Status.js","components/Head/Head.js","components/Messages/MessagesItem/MassagesItem.js","components/Messages/ButtonSend/ButtonSend.js","components/Messages/SendArea/SendArea.js","components/Messages/Messages.js","components/LastMessage/LastMessage.js","components/LastMessage/TimeLastMessage/TimeLastMessage.js","components/ContactCard/ContactCards.js","pages/MessagesPreloader.js","components/Contacts/Contacts.js","pages/Home.js","App.js","serviceWorker.js","components/Context/type.js","components/Context/modalContext/modalReducer.js","components/Context/preloaderContext/preloaderReducer.js","index.js","components/Context/preloaderContext/PreloaderState.js","components/Context/modalContext/ModalState.js"],"names":["AuthContext","React","createContext","AuthProvider","children","useState","currentUser","setCurrentUser","Provider","value","displayName","MainButton","className","disabled","type","active","onClick","attrs","classes","classNames","Tag","href","e","preventDefault","defaultProps","FormTabs","props","styleTabsSlider","styleButtonTabSignIn","styleButtonTabRegister","setIsActive","style","app","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","this","auth","db","database","presence","ref","users","messages","once","then","snapshot","val","Error","console","log","email","password","createUserWithEmailAndPassword","name","history","signInWithEmailAndPassword","updateProfile","push","signOut","quote","doc","uid","set","alert","Promise","resolve","onAuthStateChanged","get","PreloaderContext","wrapOverlay","Component","Modal","title","isOpen","onSubmit","Input","id","inputClass","labelClass","onChange","classesInput","classesLabel","inputType","key","htmlFor","eye","Icon","size","classI","func","iconSize","fontSize","withClass","tag","Wrapper","showPasswordOrText","eyeShowHide","checkEye","login","useContext","hidePreloader","showPreloader","setIsOpen","messageErrEmailOrUser","setMessageErrEmailOrUser","setTitle","count","setCount","useEffect","timer","setInterval","c","clearInterval","usernameValue","setUsernameValue","passwordValue","setPasswordValue","userValid","setUserValid","passwordValid","setPasswordValid","showButton","setShowButton","length","action","placeholder","event","target","dataUsers","child","update","userName","onlineStatus","onDisconnect","remove","signIn","onRegister","registerInFirebase","registration","modalShow","modalHide","data","checkEmail","Object","keys","forEach","user","checkEmailToDatabase","preAction","state","dataInput","username","validLabel","label","errorMessage","valid","touched","wrapperClassName","formName","iClass","validation","required","minLength","checkbox","checked","formValid","elem","currentValue","switchLabel","addValidValue","isElementValid","test","setState","map","index","currentDataInput","checkValue","ModalContext","withRouter","isActive","setStyleButtonTabSignIn","setStyleButtonRegister","setStyleTabsSlider","formLoginStyle","setFormLoginStyle","formRegisterStyle","setFormRegisterStyle","left","right","setEyeShowHide","setShowPasswordOrText","ModalWithReducer","modalState","text","Preloader","FirebaseContext","FirebaseProvide","Firebase","getDataUsers","usersList","setUsersList","dataUsersOnline","setDataUsersOnline","dataMessages","setDataMessages","on","createChatKey","arr","sort","join","BtnComeBack","backContacts","setShowFriendAvatar","useHistory","goBack","enableBackground","height","viewBox","width","xmlns","d","Avatar","status","charAt","toUpperCase","src","alt","UserName","Status","data-original","data-old_color","fill","Head","isActiveMessages","showStatus","showFriendAvatar","showStatusFriend","MessagesItem","author","timestamp","timeLastMessage","Date","toLocaleString","hour","minute","ButtonSend","SendArea","chatKey","setDisabled","message","setMessage","keyCtrl","setKeyCtrl","keyEnter","setKeyEnter","sendMessage","ServerValue","TIMESTAMP","sendMessageWithKeyboard","keyCode","prevState","onKeyDown","onKeyUp","autoFocus","bind","Messages","showMessages","values","i","messagesRender","LastMessage","lastMessage","reverse","TimeLastMessage","month","day","ContactCards","setShow","setUserFriend","setChatKey","contactCardRender","MessagesPreloader","useDencrypt","result","dencrypt","Contacts","firebaseInitialized","show","userFriend","showMessage","setShowMessage","classContacts","to","setFirebaseInitialized","getDataUsersOnline","isInitialized","App","path","exact","component","Auth","Home","Boolean","window","location","hostname","match","MODAL","PRELOADER","handlers","payload","modalReducer","DEFAULT","preloaderReducer","application","useReducer","dispatch","second","time","setTimeout","modalShowHide","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","unregister"],"mappings":"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","file":"static/js/main.1d38d033.chunk.js","sourcesContent":["import React, {useState} from 'react';\n\nexport const AuthContext = React.createContext();\n\nexport const AuthProvider = ({children}) => {\n\nconst [currentUser, setCurrentUser] = useState(null);\n\n  return (\n      <AuthContext.Provider\n          value={{\n            currentUser,\n            setCurrentUser\n          }}\n      >\n        {children}\n      </AuthContext.Provider>\n  );\n};\n\nAuthContext.displayName = \"Authorisation Context\";","import React from 'react';\nimport PropTypes from 'prop-types'\nimport classNames from \"classname\";\n\nconst MainButton = ({\n                      children, className, disabled, type, active, onClick, ...attrs\n                    }) => {\n  const onClickAction = (e) => {\n    disabled ? e.preventDefault() : onClick(e)\n  };\n  const classes = classNames(\n      className,\n      {active},\n  );\n  const Tag = attrs.href ? 'a' : 'button';\n  return (\n      <Tag\n          {...attrs}\n          className={classes}\n          type={type}\n          disabled={disabled}\n          onClick={onClickAction}\n      >\n        {children}\n      </Tag>\n  );\n};\nMainButton.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n  type: PropTypes.string,\n  onClick: PropTypes.func,\n  active: PropTypes.bool\n};\nMainButton.defaultProps = {\n  children: 'Button',\n  onClick: () => {\n  },\n  className: '',\n  disabled: false,\n  active: false\n};\nexport default MainButton;\n","import React from 'react';\nimport MainButton from \"../../UI/Buttons/MainButton/MainButton\";\n\nconst FormTabs = (props) => {\n  const {styleTabsSlider, styleButtonTabSignIn, styleButtonTabRegister, setIsActive} = props;\n  return (\n      <section className=\"form-tabs\">\n        <div\n            style={styleTabsSlider}\n            className=\"form-tabs__slider\"\n        >\n        </div>\n        <MainButton\n            className=\"form-tabs__btn form-tabs__btn_sign-in\"\n            type=\"button\"\n            onClick={() => setIsActive(false)}\n            style={styleButtonTabRegister}\n        >\n          {\"Register\"}\n        </MainButton>\n\n        <MainButton\n            className=\"form-tabs__btn form-tabs__btn_register\"\n            type=\"button\"\n            onClick={() => setIsActive(true)}\n            style={styleButtonTabSignIn}\n        >\n          {\"Sign In\"}\n        </MainButton>\n      </section>\n  )\n};\nexport default FormTabs;","import * as firebase from 'firebase';\n\nconst app = firebase.initializeApp({\n  apiKey: \"AIzaSyCsc_AjZW9cOes_qR0cua-eqxQe7vr6Zdg\",\n  authDomain: \"react-chat-ae6f1.firebaseapp.com\",\n  databaseURL: \"https://react-chat-ae6f1.firebaseio.com\",\n  projectId: \"react-chat-ae6f1\",\n  storageBucket: \"react-chat-ae6f1.appspot.com\",\n  messagingSenderId: \"325134953358\",\n  appId: \"1:325134953358:web:0bba053bafafdcc40612df\"\n});\n\nexport default app;","import app from '../../services/initFirebase';\n\nclass Firebase {\n  constructor() {\n    this.auth = app.auth;\n    this.db = app.database();\n    this.presence = app.database().ref('presence/');\n    this.users = app.database().ref('users/');\n    this.messages = app.database().ref('chats/');\n  }\n\n  async getDataUsers() {\n    try {\n      return app.database().ref('users/').once('value')\n          .then((snapshot) => {\n            return snapshot.val()\n          });\n    } catch (e) {\n      new Error(e);\n      console.log(e);\n    }\n  }\n\n  async getDataUsersOnline() {\n    try {\n      return app.database().ref('presence/').once('value')\n          .then((snapshot) => {\n            return snapshot.val()\n          })\n    } catch (e) {\n      new Error(e);\n      console.log(e);\n    }\n  }\n\n  async getDataMessages() {\n    try {\n      return app.database().ref('chats/').once('value')\n          .then((snapshot) => {\n            return snapshot.val()\n          })\n    } catch (e) {\n      new Error(e);\n      console.log(e);\n    }\n  }\n\n  async registerInFirebase(email, password) {\n    try {\n      await app.auth().createUserWithEmailAndPassword(email, password);\n    } catch (e) {\n      new Error(e);\n      console.log(e);\n    }\n  }\n\n  async login(email, password, name, history) {\n    try {\n      await app.auth().signInWithEmailAndPassword(email, password);\n      await app.auth().currentUser.updateProfile({\n        displayName: name\n      });\n      history.push('/home/');\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n  logout() {\n    return this.auth.signOut()\n  }\n\n  addQuote(quote) {\n    if (!this.auth.currentUser) {\n      return alert('Not authorized')\n    }\n    return this.db.doc(`users_codedamn_video/${this.auth.currentUser.uid}`).set({\n      quote\n    })\n  }\n\n  isInitialized() {\n    return new Promise(resolve => {\n      app.auth().onAuthStateChanged(resolve)\n    })\n  }\n\n  async getCurrentUserQuote() {\n    const quote = await this.db.doc(`users_codedamn_video/${this.auth.currentUser.uid}`).get();\n    return quote.get('quote')\n  }\n\n  getCurrentUsername() {\n    if (app.auth().currentUser) {\n      return app.auth().currentUser.displayName\n    } else {\n      return null\n    }\n  }\n}\n\nexport default new Firebase();","import {createContext} from 'react';\n\nexport const PreloaderContext = createContext();\nPreloaderContext.displayName = 'Preloader Context';","import React from \"react\";\n\nconst wrapOverlay = (Component) => {\n  return (props) => {\n    return (\n        <section className={'wrapOverlay'}>\n          <Component {...props}/>\n        </section>\n    )\n  }\n};\nexport default wrapOverlay;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport wrapOverlay from \"../../hoc/wrapOverlay/wrapOverlay\";\nimport MainButton from \"../Buttons/MainButton/MainButton\";\n\nconst Modal = ({\n                 title, type, isOpen, onSubmit, children,\n               }) => {\n\n  return (\n      <>\n        { isOpen &&\n        <div className=\"modal-wrap\">\n          <div className=\"modal-header\">\n            <h1 className=\"header-title\">{title}</h1>\n          </div>\n          <div className=\"modal-body\">\n            {children}\n          </div>\n          <div className=\"modal-footer\">\n            <MainButton type={type}\n                        onClick={onSubmit}>Ok</MainButton>\n          </div>\n        </div>\n        }\n      </>\n  );\n};\n\nModal.propTypes = {\n  title: PropTypes.string,\n  type: PropTypes.string,\n  isOpen: PropTypes.bool,\n  onCancel: PropTypes.func,\n  onSubmit: PropTypes.func,\n  children: PropTypes.node,\n};\n\nModal.defaultProps = {\n  title: 'Modal title',\n  isOpen: false,\n  onSubmit: () => {},\n  children: null,\n};\n\nexport default wrapOverlay(Modal);","import React from 'react';\nimport classNames from 'classname';\n\nconst Input = ({\n                 children, id, type, inputClass, labelClass, onChange, ...attrs\n               }) => {\n  const classesInput = classNames(\n      inputClass\n  );\n  const classesLabel = classNames(\n      labelClass\n  );\n  const inputType = type || 'text';\n  return (\n      <>\n        <input\n            key={id}\n            type={inputType}\n            name={id}\n            id={id}\n            className={classesInput}\n            onChange={onChange ? onChange : () => {\n            }}\n            {...attrs}\n        />\n        {labelClass && <label\n            htmlFor={id}\n            className={classesLabel}\n        >\n          <span>{children}</span>\n\n        </label>}\n\n        {attrs.eye ? children : null}\n      </>\n  )\n};\nexport default Input","import React from 'react';\nimport classNames from 'classname';\nimport PropTypes from 'prop-types';\n\nconst Icon = ({\n                className, name, onClick, active, disabled, size, ...attrs\n              }) => {\n  const classI = classNames(\n      `fa`,\n      `fa-${name}`,\n      className,\n      active,\n      {disabled},\n      {func: onClick}\n  );\n  const iconSize = size ? {fontSize: `${size}rem`} : null;\n  return (\n      <>\n        <i className={classI}\n           onClick={disabled ? null : onClick}\n           style={iconSize}\n           {...attrs}\n        >\n        </i>\n      </>\n  )\n};\nIcon.propTypes = {\n  classNames: PropTypes.string,\n  name: PropTypes.string,\n  disabled: PropTypes.bool,\n  size: PropTypes.number,\n  onClick: PropTypes.func\n};\nIcon.defaultProps = {\n  name: '',\n  className: '',\n  size: null,\n  onClick: null,\n  disabled: false,\n};\nexport default Icon;","import React from \"react\";\n\nconst withClass = (Component, className, tag) => {\n  const Tag = tag ? tag : \"div\";\n  return (props) => {\n    return (\n        <Tag className={className}\n             style={props.style}\n        >\n          <Component {...props}/>\n        </Tag>\n    )\n  }\n};\nexport default withClass;\n","import React from 'react';\n\nconst Wrapper = (props) => {\n  const Tag = props.tag ? props.tag : \"div\",\n      className = props.className;\n  return (\n      <Tag className={className}>\n        {props.children}\n      </Tag>\n  )\n};\nexport default Wrapper;","import React, {useContext, useState, useEffect} from 'react';\nimport firebase from '../../Firebase/Firebase';\nimport {AuthContext} from '../../Context/authContext/AuthContext';\nimport {PreloaderContext} from '../../Context/preloaderContext/preloaderContext';\nimport Modal from \"../../UI/Modal/Modal\";\nimport Input from \"../../UI/Input/Input\";\nimport Icon from \"../../UI/IconEye/Icon\";\nimport MainButton from \"../../UI/Buttons/MainButton/MainButton\";\nimport withClass from \"../../hoc/withClass/withClass\";\nimport Wrapper from \"../../hoc/Wrapper/Wrapper\";\n\nconst FormLogin = ({showPasswordOrText, eyeShowHide, checkEye, history}) => {\n  const {users, presence, login} = firebase;\n  const {hidePreloader, showPreloader} = useContext(PreloaderContext);\n  const {setCurrentUser} = useContext(AuthContext);\n  const [isOpen, setIsOpen] = useState(false),\n      [messageErrEmailOrUser, setMessageErrEmailOrUser] = useState(\"Error username or password\"),\n      [title, setTitle] = useState(\"Error username or password\"),\n      [count, setCount] = useState(3);\n  useEffect(() => {\n    if (isOpen && count > 0) {\n      const timer = setInterval(() => {\n        setCount(c => c - 1);\n      }, 1000);\n      return () => clearInterval(timer);\n    } else {\n      setCount(3);\n      setIsOpen(false)\n    }\n  }, [isOpen, count]);\n  const signIn = (event, name, password) => {\n    event.preventDefault();\n    showPreloader();\n    users.once(\"value\", (snapshot) => {\n      const dataUsers = snapshot.val();\n      if (!dataUsers[name]) {\n        setTitle(`ОШИБКА ${name}`);\n        setMessageErrEmailOrUser(`Пользователь ${name} не зарегистрирован. Просьба сначала зарегистрироваться`);\n        setIsOpen(true);\n        hidePreloader();\n      }\n      if (dataUsers[name] && password !== dataUsers[name].password) {\n        setTitle(`ОШИБКА`);\n        setMessageErrEmailOrUser(`Введите корректный пароль для пользователя ${name}`);\n        setIsOpen(true);\n        hidePreloader();\n      }\n      if (dataUsers[name] && password === dataUsers[name].password) {\n        const email = dataUsers[name].email;\n        presence.child(`/${name}`).update({\n          userName: name,\n          onlineStatus: true\n        });\n        presence.child(`/${name}`).onDisconnect().remove();\n        setCurrentUser(name);\n        //hidePreloader();\n        login(email, password, name, history);\n      }\n    });\n  };\n  const [usernameValue, setUsernameValue] = useState(\"\"),\n      [passwordValue, setPasswordValue] = useState(\"\");\n  const [userValid, setUserValid] = useState(false),\n      [passwordValid, setPasswordValid] = useState(false);\n  const [showButton, setShowButton] = useState(true);\n  useEffect(() => {\n    if (usernameValue.length >= 3) setUserValid(true);\n    else setUserValid(false)\n  }, [usernameValue]);\n  useEffect(() => {\n    if (passwordValue.length >= 6) setPasswordValid(true);\n    else setPasswordValid(false)\n  }, [passwordValue]);\n  useEffect(() => {\n    if (userValid && passwordValid) setShowButton(false);\n    else setShowButton(true);\n  }, [userValid, passwordValid]);\n  return (\n      <>\n        {isOpen && <Modal title={title}\n                          isOpen={isOpen}\n                          onSubmit={() => {\n                            setIsOpen(false);\n                          }}\n        >\n          <p>\n            {messageErrEmailOrUser}\n          </p>\n          <p>{count}</p>\n        </Modal>}\n        <form action=\"\">\n          <Wrapper className={'credentials-form-item'}\n                   tag={\"section\"}>\n            <Input\n                id=\"form-login_username\"\n                type=\"text\"\n                placeholder=\" \"\n                inputClass=\"credentials-form-item__text\"\n                labelClass=\"form__label\"\n                onChange={(event) => {\n                  setUsernameValue(event.target.value);\n                }}\n            >\n              <Icon name={\"sign-in\"}/>\n              {\"User name\"}\n            </Input>\n          </Wrapper>\n          <Wrapper className={'credentials-form-item'}\n                   tag={\"section\"}>\n            <Input\n                id=\"form-login_password\"\n                type={showPasswordOrText}\n                placeholder=\" \"\n                inputClass=\"credentials-form-item__text\"\n                labelClass=\"form__label\"\n                onChange={(event) => {\n                  setPasswordValue(event.target.value);\n                }}\n            >\n              <Icon name={\"key\"}/>\n              {\"Password\"}\n            </Input>\n            <Wrapper className={'form__eye'}\n                     tag={\"span\"}>\n              <Icon\n                  active={eyeShowHide || \"hide\"}\n                  name={\"eye-slash\"}\n                  onClick={checkEye}\n              />\n              <Icon\n                  active={!eyeShowHide || \"hide\"}\n                  name={\"eye\"}\n                  onClick={checkEye}\n              />\n            </Wrapper>\n          </Wrapper>\n          <Wrapper className={'credentials-form-item credentials-form-item__checkbox'}\n                   tag={\"section\"}>\n            <Input\n                inputClass=\"credentials-form-item_input\"\n                id=\"form-login_remember-me\"\n                type=\"checkbox\"\n                labelClass=\"form__label credentials-form-item_label\"\n            >\n              {\"Remember password\"}\n            </Input>\n          </Wrapper>\n          <MainButton\n              className=\"credentials-form__btn form-login__btn\"\n              disabled={showButton}\n              onClick={(event) => {\n                signIn(event, usernameValue, passwordValue)\n              }}\n          >\n            Sign in\n          </MainButton>\n        </form>\n      </>\n  )\n};\nexport default withClass(FormLogin, \"form-login\", \"section\");","import React, {Component} from 'react';\nimport firebase from '../../Firebase/Firebase';\nimport Input from '../../UI/Input/Input';\nimport MainButton from '../../UI/Buttons/MainButton/MainButton';\nimport Icon from '../../UI/IconEye/Icon';\nimport withClass from '../../hoc/withClass/withClass';\nimport Wrapper from '../../hoc/Wrapper/Wrapper';\n\nclass FormRegister extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dataInput: {\n        username: {\n          name: 'form-register_username',\n          value: '',\n          type: 'text',\n          validLabel: 'User name',\n          label: 'User name',\n          errorMessage: 'Min 3 characters',\n          valid: false,\n          touched: false,\n          placeholder: \" \",\n          wrapperClassName: \"credentials-form-item\",\n          formName: \"form-register\",\n          inputClass: \"credentials-form-item__text\",\n          labelClass: \"form__label\",\n          iClass: \"sign-in\",\n          validation: {\n            required: true,\n            minLength: 3\n          }\n        },\n        email: {\n          name: \"email\",\n          value: '',\n          type: 'email',\n          validLabel: 'Email',\n          label: 'Email',\n          errorMessage: 'Email is not valid',\n          valid: false,\n          placeholder: \" \",\n          touched: false,\n          wrapperClassName: \"credentials-form-item\",\n          formName: \"form-register\",\n          inputClass: \"credentials-form-item__text\",\n          labelClass: \"form__label\",\n          iClass: \"envelope-o\",\n          validation: {\n            required: true,\n            email: /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n          }\n        },\n        password: {\n          name: \"password\",\n          value: '',\n          validLabel: 'Password',\n          label: 'Password',\n          errorMessage: 'Min 6 characters',\n          valid: false,\n          touched: false,\n          placeholder: \" \",\n          wrapperClassName: \"credentials-form-item\",\n          formName: \"form-register\",\n          inputClass: \"credentials-form-item__text\",\n          labelClass: \"form__label\",\n          iClass: \"key\",\n          eye: true,\n          validation: {\n            required: true,\n            minLength: 6\n          }\n        },\n        checkbox: {\n          name: \"form-register_agree-terms-conditions\",\n          type: 'checkbox',\n          label: 'Agree terms conditions',\n          errorMessage: 'Click me',\n          valid: false,\n          wrapperClassName: \"credentials-form-item credentials-form-item__checkbox\",\n          formName: \"form-register\",\n          inputClass: \"credentials-form-item_input\",\n          labelClass: \"form__label credentials-form-item_label\",\n          validation: {\n            required: true,\n            checked: false\n          }\n        },\n      },\n      formValid: false\n    };\n  }\n\n  checkValue(event, elem) {\n    const dataInput = {...this.state.dataInput};\n    const currentValue = event.target.value;\n    let formValid = true;\n    const switchLabel = (data) => {\n      if (data.touched) {\n        data.label = data.errorMessage\n      } else {\n        data.label = `${data.validLabel} success`\n      }\n    };\n    const addValidValue = (isElementValid) => {\n      if (isElementValid) {\n        dataInput[elem].valid = true;\n        dataInput[elem].touched = false;\n        dataInput[elem].value = currentValue;\n      } else {\n        dataInput[elem].valid = false;\n        dataInput[elem].touched = true;\n        dataInput[elem].value = '';\n      }\n    };\n    if (dataInput[elem].validation.required) {\n      switch (elem) {\n        case 'username' :\n          addValidValue(currentValue.length >= dataInput[elem].validation.minLength);\n          switchLabel(dataInput[elem]);\n          break;\n        case 'password' :\n          addValidValue(currentValue.length >= dataInput[elem].validation.minLength);\n          switchLabel(dataInput[elem]);\n          break;\n        case 'email' :\n          addValidValue(dataInput[elem].validation.email.test(currentValue));\n          switchLabel(dataInput[elem]);\n          break;\n        case 'checkbox' :\n          if (event.target.checked) {\n            dataInput[elem].valid = true;\n          } else dataInput[elem].valid = false;\n          break;\n      }\n    }\n    Object.keys(dataInput).forEach(type => {\n      formValid = dataInput[type].valid && formValid;\n    });\n    this.setState({dataInput, formValid})\n  };\n\n  onRegister = (name, email, password) => {\n    firebase.registerInFirebase(name, email, password)\n  };\n  registration = (event, name, email, password, showPreloader, hidePreloader, modalShow, modalHide, users, setIsActive) => {\n    event.preventDefault();\n    showPreloader(3);\n    const checkEmailToDatabase = (data) => {\n      let checkEmail = true;\n      Object.keys(data).forEach((user) => {\n        if (data[user].email === email) {\n          hidePreloader();\n          modalShow(`ОШИБКА ${email}`, `Email ${email} уже использован в системе, просьба использовать другой адрес`);\n          return checkEmail = false;\n        }\n      });\n      return checkEmail\n    };\n    const checkLoginToDatabase = (data) => {\n      if (data[name]) {\n        hidePreloader();\n        modalShow(`ОШИБКА ${name}`, `Пользователь ${name} уже создан в системе, просьба выбрать другое имя`);\n        return false\n      }\n      return true\n    };\n    users.once(\"value\", (snapshot) => {\n          const dataUsers = snapshot.val();\n          if (checkLoginToDatabase(dataUsers) && checkEmailToDatabase(dataUsers)) {\n            const newUser = users.child(`/${name}`);\n            newUser.update({\n              userName: name,\n              email: email,\n              password: password,\n            });\n            hidePreloader();\n            this.onRegister(email, password);\n            modalShow(`Поздравляем!`, `Пользователь \"${name}\" успешно зарегистрирован! Просьба войти в систему`);\n            setIsActive((preAction) => !preAction);\n          }\n        }\n    );\n  };\n\n  render() {\n    const {users} = firebase;\n    const {showPasswordOrText, eyeShowHide, checkEye, hidePreloader, showPreloader, modalHide, modalShow, setIsActive} = this.props;\n    const inputRender = () => {\n      const inputs = Object.keys(this.state.dataInput).map((elem, index) => {\n        const currentDataInput = this.state.dataInput[elem];\n        return (\n            <Wrapper className={currentDataInput.wrapperClassName}\n                     tag={\"section\"}\n                     key={currentDataInput.wrapperClassName + index}>\n              <Input\n                  key={elem + index}\n                  id={currentDataInput.name}\n                  type={currentDataInput.type ? currentDataInput.type : showPasswordOrText}\n                  placeholder={currentDataInput.placeholder ? currentDataInput.placeholder : null}\n                  inputClass={currentDataInput.inputClass}\n                  labelClass={currentDataInput.labelClass}\n                  onChange={(event) => this.checkValue(event, elem)}\n              >\n                <Icon name={currentDataInput.iClass}/>\n                {currentDataInput.label}\n              </Input>\n              {!currentDataInput.eye ? null : (\n                  <span className=\"form__eye\">\n                    <Icon\n                        active={eyeShowHide || \"hide\"}\n                        name={\"eye-slash\"}\n                        onClick={checkEye}\n                    />\n                    <Icon\n                        active={!eyeShowHide || \"hide\"}\n                        name={\"eye\"}\n                        onClick={checkEye}\n                    />\n                  </span>\n              )}\n            </Wrapper>\n        )\n      });\n      return inputs\n    };\n    return (\n        <form>\n          {inputRender()}\n          <MainButton\n              className=\"credentials-form__btn form-register__btn\"\n              disabled={!this.state.formValid}\n              onClick={(event) => {\n                this.registration(event,\n                    this.state.dataInput.username.value,\n                    this.state.dataInput.email.value,\n                    this.state.dataInput.password.value,\n                    showPreloader,\n                    hidePreloader,\n                    modalShow,\n                    modalHide,\n                    users,\n                    setIsActive)\n              }}\n          >\n            Register\n          </MainButton>\n        </form>\n    )\n  }\n}\n\nexport default withClass(FormRegister, \"form-register\", \"section\");","import {createContext} from 'react';\n\nexport const ModalContext = createContext();\nModalContext.displayName = \"ModalWithReducer Context\";","import React, {useState, useContext, useEffect} from 'react';\nimport {withRouter} from 'react-router-dom';\nimport FormTabs from \"./FormTabs/FormTabs\";\nimport FormLogin from \"./FormLogin/FormLogin\";\nimport FormRegister from \"./FormRegister/FormRegister\";\nimport {PreloaderContext} from '../Context/preloaderContext/preloaderContext';\nimport {ModalContext} from '../Context/modalContext/modalContext';\n\nconst Auth = ({history}) => {\n  const {modalHide, modalShow} = useContext(ModalContext);\n  const {hidePreloader, showPreloader} = useContext(PreloaderContext);\n  const [isActive, setIsActive] = useState();\n  useEffect(() => {\n    hidePreloader();\n  });\n  const [styleButtonTabSignIn, setStyleButtonTabSignIn] = useState({}),\n      [styleButtonTabRegister, setStyleButtonRegister] = useState({}),\n      [styleTabsSlider, setStyleTabsSlider] = useState({}),\n      [formLoginStyle, setFormLoginStyle] = useState({}),\n      [formRegisterStyle, setFormRegisterStyle] = useState({});\n  useEffect(() => {\n    if (isActive) {\n      setStyleTabsSlider({\n        'left': '110px',\n        'background': 'linear-gradient(to right, #015d53, #ce5e22)'\n      });\n      setStyleButtonTabSignIn({\n        'color': '#ECEFF1'\n      });\n      setStyleButtonRegister({\n        'color': '#000000'\n      });\n      setFormLoginStyle({\n        left: '400px'\n      });\n      setFormRegisterStyle({\n        right: '0px'\n      });\n    }\n    if (!isActive) {\n      setStyleTabsSlider({\n        'left': '0px',\n        'background': 'linear-gradient(to right, #ce5e22,  #015d53)'\n      });\n      setStyleButtonTabSignIn({\n        'color': '#000000'\n      });\n      setStyleButtonRegister({\n        'color': '#ECEFF1'\n      });\n      setFormLoginStyle({\n        left: '0px'\n      });\n      setFormRegisterStyle({\n        right: '400px'\n      });\n    }\n  }, [isActive]);\n  const [eyeShowHide, setEyeShowHide] = useState(true); //\n  const [showPasswordOrText, setShowPasswordOrText] = useState('password');\n  const checkEye = () => {\n    setEyeShowHide(!eyeShowHide);\n    if (showPasswordOrText === \"password\") {\n      setShowPasswordOrText('text');\n    } else {\n      setShowPasswordOrText('password');\n    }\n  };\n  return (\n      <section className=\"authorisation\">\n        <div className=\"sign-in-up-form\">\n\n          <FormTabs styleTabsSlider={styleTabsSlider}\n                    styleButtonTabSignIn={styleButtonTabSignIn}\n                    styleButtonTabRegister={styleButtonTabRegister}\n                    setIsActive={setIsActive}/>\n\n          {isActive && <FormLogin style={formLoginStyle}\n                                  showPasswordOrText={showPasswordOrText}\n                                  eyeShowHide={eyeShowHide}\n                                  checkEye={checkEye}\n                                  history={history}/>}\n\n          {!isActive && <FormRegister style={formRegisterStyle}\n                                      showPasswordOrText={showPasswordOrText}\n                                      eyeShowHide={eyeShowHide}\n                                      checkEye={checkEye}\n                                      hidePreloader={hidePreloader}\n                                      showPreloader={showPreloader}\n                                      modalHide={modalHide}\n                                      modalShow={modalShow}\n                                      setIsActive={setIsActive}/>}\n        </div>\n      </section>\n  )\n};\nexport default withRouter(Auth);","import React, {useContext} from 'react';\nimport {ModalContext} from \"../../Context/modalContext/modalContext\";\nimport MainButton from \"../Buttons/MainButton/MainButton\";\nimport Wrapper from \"../../hoc/Wrapper/Wrapper\";\n\nconst ModalWithReducer = () => {\n  const {modalState, modalHide} = useContext(ModalContext);\n  if (!modalState) return null;\n  return (\n      <Wrapper\n          tag={'section'}\n          className={'wrapOverlay'}\n      >\n        <div className=\"modal-wrap\">\n          <div className=\"modal-header\">\n            <h1 className=\"header-title\">{modalState.title}</h1>\n          </div>\n          <div className=\"modal-body\">\n            {modalState.text}\n            {modalState.count ?\n                <p>\n                  {modalState.count}\n                </p>\n                : null}\n          </div>\n          <div className=\"modal-footer\">\n            <MainButton\n                type={'button'}\n                onClick={modalHide}>Ok</MainButton>\n          </div>\n        </div>\n      </Wrapper>\n  );\n};\n\nexport default ModalWithReducer;\n\n","import React, {useContext} from 'react';\nimport PropTypes from 'prop-types';\nimport Wrapper from \"../../hoc/Wrapper/Wrapper\";\nimport {PreloaderContext} from '../../Context/preloaderContext/preloaderContext'\n\nexport const Preloader = () => {\n  const {state} = useContext(PreloaderContext);\n  if (state) return null;\n  return (\n      <Wrapper\n          tag={'section'}\n          className={'wrapOverlay'}\n      >\n        <div className=\"container\">\n          <div className=\"item-1\"/>\n          <div className=\"item-2\"/>\n          <div className=\"item-3\"/>\n          <div className=\"item-4\"/>\n          <div className=\"item-5\"/>\n        </div>\n      </Wrapper>\n  )\n};\nPreloader.propTypes = {\n  state: PropTypes.bool\n};\nPreloader.defaultProps = {\n  state: false\n};","import React, {useState, useEffect, useContext} from 'react';\r\nimport Firebase from \"../../Firebase/Firebase\";\r\nimport {AuthContext} from \"../authContext/AuthContext\";\r\n\r\nexport const FirebaseContext = React.createContext();\r\nexport const FirebaseProvide = ({children}) => {\r\n  const {currentUser} = useContext(AuthContext);\r\n  const {messages, getDataUsers} = Firebase;\r\n  const [usersList, setUsersList] = useState();\r\n  const [dataUsersOnline, setDataUsersOnline] = useState();\r\n  const [dataMessages, setDataMessages] = useState();\r\n  useEffect(() => {\r\n    getDataUsers().then((data) => {\r\n      let users = Object.keys(data);\r\n      setUsersList(users);\r\n    });\r\n  }, [dataUsersOnline]);\r\n  useEffect(() => {\r\n    messages.on('value', snapshot => {\r\n      setDataMessages(snapshot.val());\r\n    }, []);\r\n  }, []);\r\n\r\n  function createChatKey(user) {\r\n    if (!currentUser) throw new Error('myUsername has not been set!');\r\n    let arr = [];\r\n    arr.push(user, currentUser);\r\n    arr.sort();\r\n    return arr.join('__');\r\n  }\r\n\r\n  return (\r\n      <FirebaseContext.Provider\r\n          value={{\r\n            usersList,\r\n            dataMessages,\r\n            setDataMessages,\r\n            dataUsersOnline,\r\n            createChatKey,\r\n            setDataUsersOnline\r\n          }}\r\n      >\r\n        {children}\r\n      </FirebaseContext.Provider>\r\n  );\r\n};\r\nFirebaseContext.displayName = \"Firebase Context\";\r\n","import React from 'react';\r\nimport {useHistory} from 'react-router-dom';\r\n\r\nconst BtnComeBack = ({backContacts, className, setShowFriendAvatar, user}) => {\r\n  let history = useHistory();\r\n  return (\r\n      <section className={`${className === 'show' ? 'hide' : 'show'} btn-come-back`}\r\n               onClick={() => {\r\n                 backContacts('show');\r\n                 setShowFriendAvatar(user);\r\n                 history.goBack();\r\n               }}\r\n      >\r\n        <svg id=\"Capa_1\" enableBackground=\"new 0 0 551.13 551.13\" height=\"512\" viewBox=\"0 0 551.13 551.13\" width=\"512\"\r\n             xmlns=\"http://www.w3.org/2000/svg\">\r\n          <path d=\"m189.451 275.565 223.897-223.897v-51.668l-275.565 275.565 275.565 275.565v-51.668z\"/>\r\n        </svg>\r\n      </section>\r\n  )\r\n};\r\nexport default BtnComeBack;\r\n\r\n","import React from 'react';\n\nfunction Avatar({className, user, status}) {\n  function firstChar(str) {\n    return str.charAt(0).toUpperCase()\n  }\n\n  const currentUser = firstChar(user);\n  return (\n      <section className={`avatar ${className}_avatar`}>\n        <img src=\"https://i.ibb.co/NtGCFM2/Group-77.png\" alt='user avatar'/>\n        <section className={`avatar-item ${status}`}>\n          {currentUser}\n        </section>\n      </section>\n  )\n}\n\nexport default Avatar;","import React from 'react';\nimport classNames from 'classname';\nimport PropTypes from 'prop-types';\n\nconst UserName = ({className, name}) => {\n  const classes = classNames(\n      className, name\n  );\n  return (\n      <section className={classes}>\n        {name}\n      </section>\n  )\n};\nUserName.propTypes = {\n  className: PropTypes.string,\n  name: PropTypes.string\n};\nUserName.defaultProps = {\n  className: 'contacts-card__user-name',\n  name: ''\n};\nexport default UserName;","import React from 'react';\r\n\r\nconst Status = ({className, status, isActive}) => {\r\n  return (\r\n      <section className={`${className} ${isActive}`}>\r\n        <section className={status}>\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"512px\" viewBox=\"0 -32 512.00011 512\" width=\"512px\">\r\n            <g>\r\n              <path\r\n                  d=\"m342.382812 239.351562c-23.039062-35.941406-62.277343-57.402343-104.964843-57.402343s-81.925781 21.460937-104.960938 57.402343l-55.515625 86.605469c-9.210937 14.367188-13.460937 30.96875-12.292968 47.996094 1.167968 17.03125 7.648437 32.890625 18.738281 45.875 11.097656 12.972656 25.761719 21.839844 42.40625 25.644531 16.644531 3.804688 33.707031 2.179688 49.339843-4.691406l1.046876-.464844c39.335937-16.945312 84.285156-16.789062 123.519531.464844 10.121093 4.449219 20.84375 6.699219 31.664062 6.699219 5.882813 0 11.800781-.667969 17.664063-2.003907 16.644531-3.800781 31.308594-12.667968 42.410156-25.644531 11.09375-12.972656 17.578125-28.835937 18.75-45.871093 1.171875-17.035157-3.078125-33.632813-12.289062-48.007813zm0 0\"\r\n                  data-original=\"#000000\" className=\"active-path\" data-old_color=\"#000000\" fill=\"#ED14DB\"/>\r\n              <path\r\n                  d=\"m91.894531 239.238281c16.515625-6.34375 29.0625-19.652343 35.328125-37.476562 5.964844-16.960938 5.476563-36.109375-1.378906-53.921875-6.859375-17.800782-19.335938-32.332032-35.132812-40.921875-16.59375-9.019531-34.824219-10.488281-51.3125-4.132813-33.171876 12.753906-48.394532 53.746094-33.929688 91.398438 11.554688 29.96875 38.503906 48.886718 65.75 48.886718 6.957031 0 13.933594-1.234374 20.675781-3.832031zm0 0\"\r\n                  data-original=\"#000000\" className=\"active-path\" data-old_color=\"#000000\" fill=\"#ED14DB\"/>\r\n              <path\r\n                  d=\"m199.613281 171.386719c41.46875 0 75.207031-38.4375 75.207031-85.683594 0-47.257813-33.738281-85.703125-75.207031-85.703125-41.464843 0-75.199219 38.445312-75.199219 85.703125 0 47.246094 33.734376 85.683594 75.199219 85.683594zm0 0\"\r\n                  data-original=\"#000000\" className=\"active-path\" data-old_color=\"#000000\" fill=\"#ED14DB\"/>\r\n              <path\r\n                  d=\"m329.496094 192.4375h.003906c6.378906 2.117188 12.886719 3.128906 19.367188 3.128906 30.242187 0 59.714843-22.011718 70.960937-55.839844 6.476563-19.472656 6.050781-40.0625-1.199219-57.972656-7.585937-18.75-21.644531-32.359375-39.589844-38.324218-17.949218-5.964844-37.359374-3.476563-54.660156 7-16.527344 10.007812-29.191406 26.246093-35.660156 45.71875-13.652344 41.078124 4.640625 84.273437 40.777344 96.289062zm0 0\"\r\n                  data-original=\"#000000\" className=\"active-path\" data-old_color=\"#000000\" fill=\"#ED14DB\"/>\r\n              <path\r\n                  d=\"m487.875 182.4375-.011719-.011719c-28.597656-21.125-71.367187-11.96875-95.347656 20.421875-23.957031 32.40625-20.210937 75.972656 8.34375 97.113282 10.414063 7.714843 22.71875 11.402343 35.3125 11.402343 21.949219 0 44.785156-11.203125 60.050781-31.804687 23.953125-32.40625 20.210938-75.972656-8.347656-97.121094zm0 0\"\r\n                  data-original=\"#000000\" className=\"active-path\" data-old_color=\"#000000\" fill=\"#ED14DB\"/>\r\n            </g>\r\n          </svg>\r\n        </section>\r\n      </section>\r\n  )\r\n};\r\nexport default Status;","import React, {useState, useEffect} from 'react';\r\nimport BtnComeBack from './BtnComeBack/BtnComeBack.js'\r\nimport Avatar from \"./Avatar/Avatar\";\r\nimport UserName from \"./UserName/UserName\";\r\nimport Status from \"../Status/Status\";\r\n\r\nconst Head = ({user, className, status, backContacts, isActiveMessages, showStatus, currentUser}) => {\r\n  const [showFriendAvatar, setShowFriendAvatar] = useState(currentUser);\r\n  useEffect(() => {\r\n    if (user) {\r\n      setShowFriendAvatar(user)\r\n    } else {\r\n      setShowFriendAvatar(currentUser)\r\n    }\r\n  }, [user]);\r\n  const showStatusFriend = showStatus === 'show' ? 'hide' : 'show';\r\n  return (\r\n      <header className=\"header\">\r\n        <BtnComeBack backContacts={backContacts}\r\n                     setShowFriendAvatar={setShowFriendAvatar}\r\n                     user={currentUser}\r\n                     className={isActiveMessages}\r\n        />\r\n        <div className={`header-kitty-wrap ${isActiveMessages}`}>\r\n          <img className=\"header-kitty\" src=\"https://clipartart.com/images/angery-cat-clipart-3.png\" alt='chat avatar'/>\r\n          <h1 className={`header__chat-name ${showStatus}`}>Kitty chat<span>by Alex</span></h1>\r\n        </div>\r\n        <div className='header-user-wrap'>\r\n          <div className=\"header-avatar_wrap\">\r\n\r\n            <Avatar className='header-avatar'\r\n                    user={showFriendAvatar || currentUser || ''}\r\n                    status={status}/>\r\n\r\n            <UserName className={className}\r\n                      name={isActiveMessages === 'hide' && user || ''}/>\r\n          </div>\r\n          <Status className={`${showStatusFriend} header__status`}\r\n                  isActive={isActiveMessages === 'hide' && user || ''}\r\n                  status={status}/>\r\n        </div>\r\n      </header>\r\n  )\r\n};\r\nexport default Head;\r\n\r\n\r\n\r\n\r\n","import React from 'react';\n\nconst MessagesItem = ({author, text, timestamp, user}) => {\n  if (author && text && timestamp) {\n    const options = {hour: '2-digit', minute: '2-digit'};\n    const timeLastMessage = new Date(timestamp).toLocaleString('en-GB', options);\n    return (\n        <section className={author === user ? 'my-message-wrap' : 'friend-message-wrap'}\n                 key={author + timestamp}\n        >\n          <section className={'container-inline'}>\n            <p>{text}</p>\n            <section className=\"message-item__time\">{timeLastMessage}</section>\n          </section>\n        </section>\n    )\n  } else {\n    return null\n  }\n};\nexport default MessagesItem;\n\n","import React from 'react';\r\n\r\nconst ButtonSend = ({onClick, disabled}) => {\r\n  return (\r\n      <section className=\"button-send-wrap\">\r\n        <button className=\"messages-footer__button-send\"\r\n                value=\"push\"\r\n                onClick={(event) => onClick(event)}\r\n                disabled={disabled}\r\n        >\r\n          Meow!\r\n        </button>\r\n      </section>\r\n  )\r\n};\r\nexport default ButtonSend;\r\n","import React, {useState, useEffect} from 'react';\nimport ButtonSend from \"../ButtonSend/ButtonSend\";\nimport Firebase from \"../../Firebase/Firebase\";\nimport firebase from \"firebase\";\n\nconst SendArea = ({chatKey, currentUser}) => {\n  const {messages} = Firebase;\n  const [disabled, setDisabled] = useState(true);\n  const [message, setMessage] = useState('');\n  const [keyCtrl, setKeyCtrl] = useState(false);\n  const [keyEnter, setKeyEnter] = useState(false);\n  useEffect(() => {\n    setDisabled(message.length < 1)\n  }, [message]);\n  useEffect(() => {\n    if (keyEnter && keyCtrl) {\n    }\n  }, [keyCtrl, keyEnter]);\n\n  function sendMessage(event) {\n    event.preventDefault();\n    messages.once(\"value\", () => {\n      const newMessagesRef = messages.child(`/${chatKey}/messages`);\n      newMessagesRef.push({\n        author: currentUser,\n        timestamp: firebase.database.ServerValue.TIMESTAMP,\n        text: message\n      });\n    });\n    setMessage('');\n  }\n\n  function sendMessageWithKeyboard(event) {\n    if (event.keyCode === 13) {\n      setKeyEnter(prevState => !prevState);\n    }\n    if (event.keyCode === 17) {\n      setKeyCtrl(prevState => !prevState);\n    }\n    if (keyEnter && keyCtrl) {\n      sendMessage(event);\n    }\n  }\n\n  return (\n      <>\n        <section className=\"send-area-wrap\"\n                 onKeyDown={(e) => {\n                   sendMessageWithKeyboard(e);\n                 }}\n                 onKeyUp={(e) => {\n                   sendMessageWithKeyboard(e);\n                 }}\n        >\n          <label htmlFor=\"messages-footer__send-area\">\n\n          </label>\n          <textarea name=\"\"\n                    id=\"messages-footer__send-area\"\n                    className=\"messages-footer__send-area\"\n                    placeholder=\"Enter you message and press Ctr+Enter...\"\n                    autoFocus\n                    required\n                    value={message}\n                    onChange={(event) => setMessage(event.target.value)}>\n\n          </textarea>\n        </section>\n        <ButtonSend onClick={sendMessage.bind(this)}\n                    disabled={disabled}\n        />\n      </>\n  )\n};\nexport default SendArea;\n","import React from 'react';\r\nimport MessagesItem from \"./MessagesItem/MassagesItem\";\r\nimport SendArea from \"./SendArea/SendArea\";\r\nimport Firebase from \"../Firebase/Firebase\";\r\n\r\nconst Messages = ({user, chatKey, isActive}) => {\r\n  const {messages} = Firebase;\r\n  const showMessages = isActive === 'show' ? 'hide' : 'show';\r\n  const messagesRender = () => {\r\n    let dataMessages = {};\r\n    messages.on('value', snapshot => {\r\n      dataMessages = snapshot.val();\r\n    });\r\n    if (dataMessages[chatKey]) {\r\n      const message = Object.values(dataMessages[chatKey].messages).map((e, i) => {\r\n        return (\r\n            <MessagesItem author={e.author}\r\n                          text={e.text}\r\n                          timestamp={e.timestamp}\r\n                          key={e.timestamp + e.author}\r\n                          user={user}/>\r\n        )\r\n      });\r\n      return message;\r\n    } else {\r\n      return null\r\n    }\r\n  };\r\n  return (\r\n      <article className={`messages ${showMessages}`}>\r\n        <main className=\"messages-text\">\r\n          <div className=\"messages-text_inner\">\r\n            {messagesRender()}\r\n          </div>\r\n        </main>\r\n        <footer className=\"messages-footer\">\r\n          <form action=\"\">\r\n            <section className=\"form-wrap\">\r\n              <SendArea currentUser={user} chatKey={chatKey}/>\r\n            </section>\r\n          </form>\r\n        </footer>\r\n      </article>\r\n  )\r\n};\r\nexport default Messages;\r\n","import React from 'react';\n\nconst LastMessage = ({dataMessages}) => {\n  const getLastMessage = (data) => {\n    const key = 'messages';\n    return Object.values(data[key]).reverse()[0].text\n  };\n  const lastMessage = getLastMessage(dataMessages);\n  if (!lastMessage) return null;\n  return (\n      <section className=\"contacts-card__last-message\">\n        {lastMessage}\n      </section>\n  )\n};\nexport default LastMessage;","import React from 'react';\n\nconst TimeLastMessage = ({dataMessages}) => {\n  const getTimeLastMessage = (data) => {\n    const key = 'messages';\n    return Object.values(data[key]).reverse()[0].timestamp\n  };\n  const options = {month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit'};\n  const timeLastMessage = new Date(getTimeLastMessage(dataMessages, 'messages')).toLocaleString('en-GB', options);\n  if (!timeLastMessage) return null;\n  return (\n      <section className=\"contacts-card__time-last-message\">\n        {timeLastMessage}\n      </section>\n  )\n};\nexport default TimeLastMessage;","import React from 'react';\r\nimport Avatar from \"../Head/Avatar/Avatar\";\r\nimport UserName from \"../Head/UserName/UserName\";\r\nimport LastMessage from \"../LastMessage/LastMessage\";\r\nimport Status from \"../Status/Status\";\r\nimport TimeLastMessage from \"../LastMessage/TimeLastMessage/TimeLastMessage\";\r\nimport Firebase from \"../Firebase/Firebase\";\r\nimport {useHistory} from 'react-router-dom';\r\n\r\nconst ContactCards = ({usersList, currentUser, dataUsersOnline, createChatKey, setShow, setUserFriend, setChatKey}) => {\r\n  const {messages} = Firebase;\r\n  let history = useHistory();\r\n  const contactCardRender = (data) => {\r\n    let dataMessages = {};\r\n    messages.on('value', snapshot => {\r\n      dataMessages = snapshot.val();\r\n    }, []);\r\n    const contactCard = usersList.map((user) => {\r\n      const chatKey = createChatKey(user);\r\n      if (currentUser === user) {\r\n        return null;\r\n      }\r\n      return (\r\n          <section className=\"contacts-card\"\r\n                   key={`contacts-card_${user}`}\r\n                   onClick={() => {\r\n                     setUserFriend(user);\r\n                     setChatKey(chatKey);\r\n                     setShow('hide');\r\n                     history.push(`/home/${chatKey}/`);\r\n                   }}>\r\n\r\n            <Avatar className='contacts-card'\r\n                    user={user}\r\n                    key={`contacts-card-avatar_${user}`}\r\n                    status={data[user] ? 'status_online' : 'status_offline'}/>\r\n\r\n            <div className=\"contacts-card__info\">\r\n              <div className=\"contacts-card__info-items\">\r\n                <UserName className='contacts-card__user-name' name={user} key={`contacts-card__user-name_${user}`}/>\r\n                <Status className={'contacts-card__status'}\r\n                        status={data[user] ? 'status_online' : 'status_offline'}\r\n                        key={`contacts-card__status_${user}`}/>\r\n              </div>\r\n              <div className=\"contacts-card__info-items\">\r\n                {dataMessages[chatKey] &&\r\n                <LastMessage dataMessages={dataMessages[chatKey]} key={`contacts-card__last-message_${user}`}/>}\r\n                {dataMessages[chatKey] &&\r\n                <TimeLastMessage dataMessages={dataMessages[chatKey]}\r\n                                 key={`contacts-card__time-last-message_${user}`}/>}\r\n              </div>\r\n            </div>\r\n          </section>\r\n      )\r\n    });\r\n    return contactCard;\r\n  };\r\n  return (\r\n      <div>\r\n        {usersList && currentUser && dataUsersOnline && contactCardRender(dataUsersOnline)}\r\n      </div>\r\n  )\r\n};\r\nexport default ContactCards;","import React from \"react\";\r\nimport {useDencrypt} from \"use-dencrypt-effect\";\r\n\r\nconst values = [\"А могла быть Ваша реклама ;)\"];\r\nconst MessagesPreloader = () => {\r\n  const {result, dencrypt} = useDencrypt();\r\n  React.useEffect(() => {\r\n    let i = 0;\r\n    const action = setInterval(() => {\r\n      dencrypt(values[i]);\r\n      i = i === values.length - 1 ? 0 : i + 1;\r\n    }, 1000);\r\n    return () => clearInterval(action);\r\n  }, []);\r\n  return (\r\n      <div className='messages-preloader'>\r\n        <h2 className='messages-preloader__title'>{result}</h2>\r\n      </div>\r\n  );\r\n};\r\nexport default MessagesPreloader;","import React, {useContext, useState, useEffect} from 'react';\nimport classNames from 'classname';\nimport {FirebaseContext} from \"../Context/firebaseContext/FirebaseContext\";\nimport Head from \"../Head/Head\";\nimport Messages from \"../Messages/Messages\";\nimport ContactCards from \"../ContactCard/ContactCards\";\nimport MessagesPreloader from \"../../pages/MessagesPreloader\";\nimport {Redirect} from 'react-router-dom';\n\nconst Contacts = ({firebaseInitialized, dataUsersOnline, currentUser}) => {\n  const {usersList, createChatKey} = useContext(FirebaseContext);\n  const [show, setShow] = useState('show');\n  const [userFriend, setUserFriend] = useState();\n  const [chatKey, setChatKey] = useState();\n  const [showMessage, setShowMessage] = useState();\n  let classContacts = classNames(\n      'contacts',\n      'contacts-wrap',\n  );\n  useEffect(() => {\n    if (userFriend && chatKey) setShowMessage(true)\n  }, [userFriend, chatKey]);\n  return firebaseInitialized ? (\n      <>\n        <Head className=\"contacts-card__user-name_in-header\"\n              user={userFriend}\n              status={userFriend && dataUsersOnline[userFriend] ? 'status_online' : 'status_offline'}\n              backContacts={setShow}\n              isActiveMessages={show}\n              showStatus={show}\n              currentUser={currentUser}/>\n\n        <main className='main'>\n          <nav className={`${classContacts} ${show}`}>\n            <ContactCards usersList={usersList}\n                          currentUser={currentUser}\n                          dataUsersOnline={dataUsersOnline}\n                          createChatKey={createChatKey}\n                          setShow={setShow}\n                          setUserFriend={setUserFriend}\n                          setChatKey={setChatKey}/>\n          </nav>\n\n          {showMessage && <Messages user={currentUser} chatKey={chatKey} isActive={show}/> || <MessagesPreloader/>}\n        </main>\n      </>\n  ) : <Redirect to=\"/\"/>\n};\nexport default Contacts;","import React, {useContext, useEffect, useState} from 'react';\nimport {AuthContext} from '../components/Context/authContext/AuthContext';\nimport {PreloaderContext} from '../components/Context/preloaderContext/preloaderContext';\nimport Contacts from '../components/Contacts/Contacts';\nimport firebase from \"../components/Firebase/Firebase\";\nimport {withRouter, Redirect} from 'react-router-dom';\nimport Firebase from \"../components/Firebase/Firebase\";\n\nconst Home = () => {\n  const {currentUser, setCurrentUser} = useContext(AuthContext);\n  const {showPreloader, hidePreloader} = useContext(PreloaderContext);\n  const [dataUsersOnline, setDataUsersOnline] = useState(null);\n  const [firebaseInitialized, setFirebaseInitialized] = useState(true);\n  const {getDataUsersOnline, presence} = Firebase;\n  useEffect(() => {\n    firebase.isInitialized().then(val => {\n      setCurrentUser(() => val.displayName);\n      setFirebaseInitialized(val);\n    });\n  });\n  useEffect(() => {\n    if (!dataUsersOnline ?? currentUser) {\n      presence.child(`/${currentUser}`).update({\n        'userName': currentUser,\n        'onlineStatus': true\n      });\n      presence.child(`/${currentUser}`).onDisconnect().remove();\n      presence.on('child_added', snapshot => {\n        getDataUsersOnline().then((snapshot) => {\n          setDataUsersOnline(snapshot);\n        });\n      });\n      presence.on('child_removed', snapshot => {\n        getDataUsersOnline().then((snapshot) => {\n          setDataUsersOnline(snapshot);\n        });\n      });\n    }\n  });\n  useEffect(() => {\n    firebaseInitialized ? hidePreloader() : showPreloader();\n  }, []);\n  return firebaseInitialized ?\n      <Contacts firebaseInitialized={firebaseInitialized} dataUsersOnline={dataUsersOnline} currentUser={currentUser}/>\n      : <Redirect to=\"/\"/>\n};\nexport default withRouter(Home);","import React from 'react';\nimport {Switch, Route, Redirect} from \"react-router-dom\";\nimport {AuthProvider} from './components/Context/authContext/AuthContext'\nimport './styles/style.css';\nimport Auth from \"./components/Auth/Auth\";\nimport ModalWithReducer from \"./components/UI/Modal/ModalWithReducer\";\nimport {Preloader} from \"./components/UI/Preloader/Preloader\";\nimport Home from \"./pages/Home\";\nimport {FirebaseProvide} from \"./components/Context/firebaseContext/FirebaseContext\";\n\nfunction App() {\n  return (\n      <AuthProvider>\n        <FirebaseProvide>\n          <Preloader/>\n          <ModalWithReducer/>\n          <Switch>\n            <Route path='/'\n                   exact\n                   component={Auth}\n            />\n            <Route path='/home/'\n                   component={Home}/>\n            <Redirect to='/'/>\n          </Switch>\n        </FirebaseProvide>\n      </AuthProvider>\n  );\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n              'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n      .register(swUrl)\n      .then(registration => {\n        registration.onupdatefound = () => {\n          const installingWorker = registration.installing;\n          if (installingWorker == null) {\n            return;\n          }\n          installingWorker.onstatechange = () => {\n            if (installingWorker.state === 'installed') {\n              if (navigator.serviceWorker.controller) {\n                // At this point, the updated precached content has been fetched,\n                // but the previous service worker will still serve the older\n                // content until all client tabs are closed.\n                console.log(\n                    'New content is available and will be used when all ' +\n                    'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n                );\n                // Execute callback\n                if (config && config.onUpdate) {\n                  config.onUpdate(registration);\n                }\n              } else {\n                // At this point, everything has been precached.\n                // It's the perfect time to display a\n                // \"Content is cached for offline use.\" message.\n                console.log('Content is cached for offline use.');\n                // Execute callback\n                if (config && config.onSuccess) {\n                  config.onSuccess(registration);\n                }\n              }\n            }\n          };\n        };\n      })\n      .catch(error => {\n        console.error('Error during service worker registration:', error);\n      });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n      .then(response => {\n        // Ensure service worker exists, and that we really are getting a JS file.\n        const contentType = response.headers.get('content-type');\n        if (\n            response.status === 404 ||\n            (contentType != null && contentType.indexOf('javascript') === -1)\n        ) {\n          // No service worker found. Probably a different app. Reload the page.\n          navigator.serviceWorker.ready.then(registration => {\n            registration.unregister().then(() => {\n              window.location.reload();\n            });\n          });\n        } else {\n          // Service worker found. Proceed as normal.\n          registerValidSW(swUrl, config);\n        }\n      })\n      .catch(() => {\n        console.log(\n            'No internet connection found. App is running in offline mode.'\n        );\n      });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","export const MODAL = {\n  SHOW_MODAL: 'SHOW',\n  HIDE_MODAL: 'HIDE',\n  SHOW_MODAL_HIDE: 'SHOW'\n};\n\nexport const PRELOADER = {\n  ISLOADING: 'SHOW',\n  ISLOADED: 'HIDE'\n};","import {MODAL} from \"../type\";\n\nconst handlers = {\n  [MODAL.SHOW_MODAL]: (state, action) => {\n    return action.payload\n  },\n  [MODAL.HIDE_MODAL]: () => null,\n  [MODAL.SHOW_MODAL_HIDE]: (state, action) => {\n    return action.payload\n  },\n  DEFAULT: state => state\n};\n\nexport const modalReducer = (state, action) => {\n  const handler = handlers[action.type] || handlers.DEFAULT;\n  return handler(state, action);\n};","import {PRELOADER} from '../type';\n\nconst handlers = {\n  [PRELOADER.ISLOADING]: (state, action) => {\n    return action.payload\n  },\n  [PRELOADER.ISLOADED]: () => null,\n  DEFAULT: state => state\n};\n\nexport const preloaderReducer = (state, action) => {\n  const result = handlers[action.type] || handlers.DEFAULT;\n  return result(state, action);\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {HashRouter as Router} from 'react-router-dom';\nimport * as serviceWorker from './serviceWorker';\nimport {ModalState} from \"./components/Context/modalContext/ModalState\";\nimport {PreloaderState} from './components/Context/preloaderContext/PreloaderState';\n\nconst application = (\n    <Router>\n      <PreloaderState>\n        <ModalState>\n          <App/>\n        </ModalState>\n      </PreloaderState>\n    </Router>\n);\nReactDOM.render(application, document.getElementById('root'));\nserviceWorker.unregister();\n","import React, {useReducer} from 'react';\nimport {preloaderReducer} from './preloaderReducer';\nimport {PreloaderContext} from './preloaderContext';\nimport {PRELOADER} from '../type';\n\nexport const PreloaderState = ({children}) => {\n  const [state, dispatch] = useReducer(preloaderReducer, null);\n  const hidePreloader = (second) => {\n    let time = second * 1000;\n    if (!second) time = 1500;\n    setTimeout(() => {\n      dispatch({\n        type: PRELOADER.ISLOADING,\n        payload: {second}\n      })\n    }, time);\n  };\n  const showPreloader = () => dispatch({type: PRELOADER.ISLOADED});\n  return (\n      <PreloaderContext.Provider value={{\n        showPreloader,\n        hidePreloader,\n        state\n      }}>\n        {children}\n      </PreloaderContext.Provider>\n  )\n};\n\n","import React, {useReducer} from 'react';\nimport {ModalContext} from \"./modalContext\";\nimport {modalReducer} from \"./modalReducer\";\nimport {MODAL} from \"../type\";\n\nexport const ModalState = ({children}) => {\n  const [state, dispatch] = useReducer(modalReducer, null);\n  const modalShow = (title, text) => {\n    dispatch({\n      type: MODAL.SHOW_MODAL,\n      payload: {title, text}\n    })\n  };\n  const modalHide = () => dispatch({type: MODAL.HIDE_MODAL});\n  const modalShowHide = (title, text, count) => {\n    dispatch({\n      type: MODAL.SHOW_MODAL_HIDE,\n      payload: {title, text, count}\n    });\n  };\n  return (\n      <ModalContext.Provider value={{\n        modalHide,\n        modalShow,\n        modalShowHide,\n        modalState: state\n      }}>\n        {children}\n      </ModalContext.Provider>\n  )\n};"],"sourceRoot":""}