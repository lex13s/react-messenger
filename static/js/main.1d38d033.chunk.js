(this.webpackJsonpjschat=this.webpackJsonpjschat||[]).push([[0],{40:function(e,t,a){e.exports=a(62)},45:function(e,t,a){},46:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(32),s=a.n(c),l=(a(45),a(14)),o=a(3),i=r.a.createContext(),u=function(e){var t=e.children,a=Object(n.useState)(null),c=Object(o.a)(a,2),s=c[0],l=c[1];return r.a.createElement(i.Provider,{value:{currentUser:s,setCurrentUser:l}},t)};i.displayName="Authorisation Context";a(46);var m=a(18),d=a(10),f=a.n(d),h=function(e){var t=e.children,a=e.className,n=e.disabled,c=e.type,s=e.active,l=e.onClick,o=Object(m.a)(e,["children","className","disabled","type","active","onClick"]),i=f()(a,{active:s}),u=o.href?"a":"button";return r.a.createElement(u,Object.assign({},o,{className:i,type:c,disabled:n,onClick:function(e){n?e.preventDefault():l(e)}}),t)};h.defaultProps={children:"Button",onClick:function(){},className:"",disabled:!1,active:!1};var b=h,p=function(e){var t=e.styleTabsSlider,a=e.styleButtonTabSignIn,n=e.styleButtonTabRegister,c=e.setIsActive;return r.a.createElement("section",{className:"form-tabs"},r.a.createElement("div",{style:t,className:"form-tabs__slider"}),r.a.createElement(b,{className:"form-tabs__btn form-tabs__btn_sign-in",type:"button",onClick:function(){return c(!1)},style:n},"Register"),r.a.createElement(b,{className:"form-tabs__btn form-tabs__btn_register",type:"button",onClick:function(){return c(!0)},style:a},"Sign In"))},v=a(8),E=a.n(v),g=a(17),O=a(23),y=a(24),j=a(25),_=a.n(j),w=j.initializeApp({apiKey:"AIzaSyCsc_AjZW9cOes_qR0cua-eqxQe7vr6Zdg",authDomain:"react-chat-ae6f1.firebaseapp.com",databaseURL:"https://react-chat-ae6f1.firebaseio.com",projectId:"react-chat-ae6f1",storageBucket:"react-chat-ae6f1.appspot.com",messagingSenderId:"325134953358",appId:"1:325134953358:web:0bba053bafafdcc40612df"}),N=new(function(){function e(){Object(O.a)(this,e),this.auth=w.auth,this.db=w.database(),this.presence=w.database().ref("presence/"),this.users=w.database().ref("users/"),this.messages=w.database().ref("chats/")}return Object(y.a)(e,[{key:"getDataUsers",value:function(){var e=Object(g.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",w.database().ref("users/").once("value").then((function(e){return e.val()})));case 4:e.prev=4,e.t0=e.catch(0),new Error(e.t0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(){return e.apply(this,arguments)}}()},{key:"getDataUsersOnline",value:function(){var e=Object(g.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",w.database().ref("presence/").once("value").then((function(e){return e.val()})));case 4:e.prev=4,e.t0=e.catch(0),new Error(e.t0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(){return e.apply(this,arguments)}}()},{key:"getDataMessages",value:function(){var e=Object(g.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",w.database().ref("chats/").once("value").then((function(e){return e.val()})));case 4:e.prev=4,e.t0=e.catch(0),new Error(e.t0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(){return e.apply(this,arguments)}}()},{key:"registerInFirebase",value:function(){var e=Object(g.a)(E.a.mark((function e(t,a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.auth().createUserWithEmailAndPassword(t,a);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),new Error(e.t0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(g.a)(E.a.mark((function e(t,a,n,r){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.auth().signInWithEmailAndPassword(t,a);case 3:return e.next=5,w.auth().currentUser.updateProfile({displayName:n});case 5:r.push("/home/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"logout",value:function(){return this.auth.signOut()}},{key:"addQuote",value:function(e){return this.auth.currentUser?this.db.doc("users_codedamn_video/".concat(this.auth.currentUser.uid)).set({quote:e}):alert("Not authorized")}},{key:"isInitialized",value:function(){return new Promise((function(e){w.auth().onAuthStateChanged(e)}))}},{key:"getCurrentUserQuote",value:function(){var e=Object(g.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.doc("users_codedamn_video/".concat(this.auth.currentUser.uid)).get();case 2:return t=e.sent,e.abrupt("return",t.get("quote"));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCurrentUsername",value:function(){return w.auth().currentUser?w.auth().currentUser.displayName:null}}]),e}()),C=Object(n.createContext)();C.displayName="Preloader Context";var k=function(e){return function(t){return r.a.createElement("section",{className:"wrapOverlay"},r.a.createElement(e,t))}},x=function(e){var t=e.title,a=e.type,n=e.isOpen,c=e.onSubmit,s=e.children;return r.a.createElement(r.a.Fragment,null,n&&r.a.createElement("div",{className:"modal-wrap"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h1",{className:"header-title"},t)),r.a.createElement("div",{className:"modal-body"},s),r.a.createElement("div",{className:"modal-footer"},r.a.createElement(b,{type:a,onClick:c},"Ok"))))};x.defaultProps={title:"Modal title",isOpen:!1,onSubmit:function(){},children:null};var S=k(x),U=function(e){var t=e.children,a=e.id,n=e.type,c=e.inputClass,s=e.labelClass,l=e.onChange,o=Object(m.a)(e,["children","id","type","inputClass","labelClass","onChange"]),i=f()(c),u=f()(s),d=n||"text";return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",Object.assign({key:a,type:d,name:a,id:a,className:i,onChange:l||function(){}},o)),s&&r.a.createElement("label",{htmlFor:a,className:u},r.a.createElement("span",null,t)),o.eye?t:null)},I=function(e){var t=e.className,a=e.name,n=e.onClick,c=e.active,s=e.disabled,l=e.size,o=Object(m.a)(e,["className","name","onClick","active","disabled","size"]),i=f()("fa","fa-".concat(a),t,c,{disabled:s},{func:n}),u=l?{fontSize:"".concat(l,"rem")}:null;return r.a.createElement(r.a.Fragment,null,r.a.createElement("i",Object.assign({className:i,onClick:s?null:n,style:u},o)))};I.defaultProps={name:"",className:"",size:null,onClick:null,disabled:!1};var P=I,D=function(e,t,a){var n=a||"div";return function(a){return r.a.createElement(n,{className:t,style:a.style},r.a.createElement(e,a))}},A=function(e){var t=e.tag?e.tag:"div",a=e.className;return r.a.createElement(t,{className:a},e.children)},F=D((function(e){var t=e.showPasswordOrText,a=e.eyeShowHide,c=e.checkEye,s=e.history,l=N.users,u=N.presence,m=N.login,d=Object(n.useContext)(C),f=d.hidePreloader,h=d.showPreloader,p=Object(n.useContext)(i).setCurrentUser,v=Object(n.useState)(!1),E=Object(o.a)(v,2),g=E[0],O=E[1],y=Object(n.useState)("Error username or password"),j=Object(o.a)(y,2),_=j[0],w=j[1],k=Object(n.useState)("Error username or password"),x=Object(o.a)(k,2),I=x[0],D=x[1],F=Object(n.useState)(3),M=Object(o.a)(F,2),z=M[0],B=M[1];Object(n.useEffect)((function(){if(g&&z>0){var e=setInterval((function(){B((function(e){return e-1}))}),1e3);return function(){return clearInterval(e)}}B(3),O(!1)}),[g,z]);var L=Object(n.useState)(""),T=Object(o.a)(L,2),H=T[0],K=T[1],R=Object(n.useState)(""),q=Object(o.a)(R,2),W=q[0],V=q[1],G=Object(n.useState)(!1),Z=Object(o.a)(G,2),Q=Z[0],J=Z[1],$=Object(n.useState)(!1),X=Object(o.a)($,2),Y=X[0],ee=X[1],te=Object(n.useState)(!0),ae=Object(o.a)(te,2),ne=ae[0],re=ae[1];return Object(n.useEffect)((function(){H.length>=3?J(!0):J(!1)}),[H]),Object(n.useEffect)((function(){W.length>=6?ee(!0):ee(!1)}),[W]),Object(n.useEffect)((function(){re(!Q||!Y)}),[Q,Y]),r.a.createElement(r.a.Fragment,null,g&&r.a.createElement(S,{title:I,isOpen:g,onSubmit:function(){O(!1)}},r.a.createElement("p",null,_),r.a.createElement("p",null,z)),r.a.createElement("form",{action:""},r.a.createElement(A,{className:"credentials-form-item",tag:"section"},r.a.createElement(U,{id:"form-login_username",type:"text",placeholder:" ",inputClass:"credentials-form-item__text",labelClass:"form__label",onChange:function(e){K(e.target.value)}},r.a.createElement(P,{name:"sign-in"}),"User name")),r.a.createElement(A,{className:"credentials-form-item",tag:"section"},r.a.createElement(U,{id:"form-login_password",type:t,placeholder:" ",inputClass:"credentials-form-item__text",labelClass:"form__label",onChange:function(e){V(e.target.value)}},r.a.createElement(P,{name:"key"}),"Password"),r.a.createElement(A,{className:"form__eye",tag:"span"},r.a.createElement(P,{active:a||"hide",name:"eye-slash",onClick:c}),r.a.createElement(P,{active:!a||"hide",name:"eye",onClick:c}))),r.a.createElement(A,{className:"credentials-form-item credentials-form-item__checkbox",tag:"section"},r.a.createElement(U,{inputClass:"credentials-form-item_input",id:"form-login_remember-me",type:"checkbox",labelClass:"form__label credentials-form-item_label"},"Remember password")),r.a.createElement(b,{className:"credentials-form__btn form-login__btn",disabled:ne,onClick:function(e){!function(e,t,a){e.preventDefault(),h(),l.once("value",(function(e){var n=e.val();if(n[t]||(D("\u041e\u0428\u0418\u0411\u041a\u0410 ".concat(t)),w("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c ".concat(t," \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d. \u041f\u0440\u043e\u0441\u044c\u0431\u0430 \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),O(!0),f()),n[t]&&a!==n[t].password&&(D("\u041e\u0428\u0418\u0411\u041a\u0410"),w("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c \u0434\u043b\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f ".concat(t)),O(!0),f()),n[t]&&a===n[t].password){var r=n[t].email;u.child("/".concat(t)).update({userName:t,onlineStatus:!0}),u.child("/".concat(t)).onDisconnect().remove(),p(t),m(r,a,t,s)}}))}(e,H,W)}},"Sign in")))}),"form-login","section"),M=a(33),z=a(38),B=a(34),L=a(39),T=D(function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(z.a)(this,Object(B.a)(t).call(this,e))).onRegister=function(e,t,a){N.registerInFirebase(e,t,a)},a.registration=function(e,t,n,r,c,s,l,o,i,u){e.preventDefault(),c(3);i.once("value",(function(e){var c=e.val();c[t]&&(s(),l("\u041e\u0428\u0418\u0411\u041a\u0410 ".concat(t),"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c ".concat(t," \u0443\u0436\u0435 \u0441\u043e\u0437\u0434\u0430\u043d \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435, \u043f\u0440\u043e\u0441\u044c\u0431\u0430 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0435 \u0438\u043c\u044f")),!0)||!function(e){var t=!0;return Object.keys(e).forEach((function(a){if(e[a].email===n)return s(),l("\u041e\u0428\u0418\u0411\u041a\u0410 ".concat(n),"Email ".concat(n," \u0443\u0436\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435, \u043f\u0440\u043e\u0441\u044c\u0431\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0439 \u0430\u0434\u0440\u0435\u0441")),t=!1})),t}(c)||(i.child("/".concat(t)).update({userName:t,email:n,password:r}),s(),a.onRegister(n,r),l("\u041f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u044f\u0435\u043c!",'\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c "'.concat(t,'" \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d! \u041f\u0440\u043e\u0441\u044c\u0431\u0430 \u0432\u043e\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443')),u((function(e){return!e})))}))},a.state={dataInput:{username:{name:"form-register_username",value:"",type:"text",validLabel:"User name",label:"User name",errorMessage:"Min 3 characters",valid:!1,touched:!1,placeholder:" ",wrapperClassName:"credentials-form-item",formName:"form-register",inputClass:"credentials-form-item__text",labelClass:"form__label",iClass:"sign-in",validation:{required:!0,minLength:3}},email:{name:"email",value:"",type:"email",validLabel:"Email",label:"Email",errorMessage:"Email is not valid",valid:!1,placeholder:" ",touched:!1,wrapperClassName:"credentials-form-item",formName:"form-register",inputClass:"credentials-form-item__text",labelClass:"form__label",iClass:"envelope-o",validation:{required:!0,email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}},password:{name:"password",value:"",validLabel:"Password",label:"Password",errorMessage:"Min 6 characters",valid:!1,touched:!1,placeholder:" ",wrapperClassName:"credentials-form-item",formName:"form-register",inputClass:"credentials-form-item__text",labelClass:"form__label",iClass:"key",eye:!0,validation:{required:!0,minLength:6}},checkbox:{name:"form-register_agree-terms-conditions",type:"checkbox",label:"Agree terms conditions",errorMessage:"Click me",valid:!1,wrapperClassName:"credentials-form-item credentials-form-item__checkbox",formName:"form-register",inputClass:"credentials-form-item_input",labelClass:"form__label credentials-form-item_label",validation:{required:!0,checked:!1}}},formValid:!1},a}return Object(L.a)(t,e),Object(y.a)(t,[{key:"checkValue",value:function(e,t){var a=Object(M.a)({},this.state.dataInput),n=e.target.value,r=!0,c=function(e){e.touched?e.label=e.errorMessage:e.label="".concat(e.validLabel," success")},s=function(e){e?(a[t].valid=!0,a[t].touched=!1,a[t].value=n):(a[t].valid=!1,a[t].touched=!0,a[t].value="")};if(a[t].validation.required)switch(t){case"username":case"password":s(n.length>=a[t].validation.minLength),c(a[t]);break;case"email":s(a[t].validation.email.test(n)),c(a[t]);break;case"checkbox":e.target.checked?a[t].valid=!0:a[t].valid=!1}Object.keys(a).forEach((function(e){r=a[e].valid&&r})),this.setState({dataInput:a,formValid:r})}},{key:"render",value:function(){var e=this,t=N.users,a=this.props,n=a.showPasswordOrText,c=a.eyeShowHide,s=a.checkEye,l=a.hidePreloader,o=a.showPreloader,i=a.modalHide,u=a.modalShow,m=a.setIsActive;return r.a.createElement("form",null,Object.keys(e.state.dataInput).map((function(t,a){var l=e.state.dataInput[t];return r.a.createElement(A,{className:l.wrapperClassName,tag:"section",key:l.wrapperClassName+a},r.a.createElement(U,{key:t+a,id:l.name,type:l.type?l.type:n,placeholder:l.placeholder?l.placeholder:null,inputClass:l.inputClass,labelClass:l.labelClass,onChange:function(a){return e.checkValue(a,t)}},r.a.createElement(P,{name:l.iClass}),l.label),l.eye?r.a.createElement("span",{className:"form__eye"},r.a.createElement(P,{active:c||"hide",name:"eye-slash",onClick:s}),r.a.createElement(P,{active:!c||"hide",name:"eye",onClick:s})):null)})),r.a.createElement(b,{className:"credentials-form__btn form-register__btn",disabled:!this.state.formValid,onClick:function(a){e.registration(a,e.state.dataInput.username.value,e.state.dataInput.email.value,e.state.dataInput.password.value,o,l,u,i,t,m)}},"Register"))}}]),t}(n.Component),"form-register","section"),H=Object(n.createContext)();H.displayName="ModalWithReducer Context";var K=Object(l.h)((function(e){var t=e.history,a=Object(n.useContext)(H),c=a.modalHide,s=a.modalShow,l=Object(n.useContext)(C),i=l.hidePreloader,u=l.showPreloader,m=Object(n.useState)(),d=Object(o.a)(m,2),f=d[0],h=d[1];Object(n.useEffect)((function(){i()}));var b=Object(n.useState)({}),v=Object(o.a)(b,2),E=v[0],g=v[1],O=Object(n.useState)({}),y=Object(o.a)(O,2),j=y[0],_=y[1],w=Object(n.useState)({}),N=Object(o.a)(w,2),k=N[0],x=N[1],S=Object(n.useState)({}),U=Object(o.a)(S,2),I=U[0],P=U[1],D=Object(n.useState)({}),A=Object(o.a)(D,2),M=A[0],z=A[1];Object(n.useEffect)((function(){f&&(x({left:"110px",background:"linear-gradient(to right, #015d53, #ce5e22)"}),g({color:"#ECEFF1"}),_({color:"#000000"}),P({left:"400px"}),z({right:"0px"})),f||(x({left:"0px",background:"linear-gradient(to right, #ce5e22,  #015d53)"}),g({color:"#000000"}),_({color:"#ECEFF1"}),P({left:"0px"}),z({right:"400px"}))}),[f]);var B=Object(n.useState)(!0),L=Object(o.a)(B,2),K=L[0],R=L[1],q=Object(n.useState)("password"),W=Object(o.a)(q,2),V=W[0],G=W[1],Z=function(){R(!K),G("password"===V?"text":"password")};return r.a.createElement("section",{className:"authorisation"},r.a.createElement("div",{className:"sign-in-up-form"},r.a.createElement(p,{styleTabsSlider:k,styleButtonTabSignIn:E,styleButtonTabRegister:j,setIsActive:h}),f&&r.a.createElement(F,{style:I,showPasswordOrText:V,eyeShowHide:K,checkEye:Z,history:t}),!f&&r.a.createElement(T,{style:M,showPasswordOrText:V,eyeShowHide:K,checkEye:Z,hidePreloader:i,showPreloader:u,modalHide:c,modalShow:s,setIsActive:h})))})),R=function(){var e=Object(n.useContext)(H),t=e.modalState,a=e.modalHide;return t?r.a.createElement(A,{tag:"section",className:"wrapOverlay"},r.a.createElement("div",{className:"modal-wrap"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h1",{className:"header-title"},t.title)),r.a.createElement("div",{className:"modal-body"},t.text,t.count?r.a.createElement("p",null,t.count):null),r.a.createElement("div",{className:"modal-footer"},r.a.createElement(b,{type:"button",onClick:a},"Ok")))):null},q=function(){return Object(n.useContext)(C).state?null:r.a.createElement(A,{tag:"section",className:"wrapOverlay"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"item-1"}),r.a.createElement("div",{className:"item-2"}),r.a.createElement("div",{className:"item-3"}),r.a.createElement("div",{className:"item-4"}),r.a.createElement("div",{className:"item-5"})))};q.defaultProps={state:!1};var W=r.a.createContext(),V=function(e){var t=e.children,a=Object(n.useContext)(i).currentUser,c=N.messages,s=N.getDataUsers,l=Object(n.useState)(),u=Object(o.a)(l,2),m=u[0],d=u[1],f=Object(n.useState)(),h=Object(o.a)(f,2),b=h[0],p=h[1],v=Object(n.useState)(),E=Object(o.a)(v,2),g=E[0],O=E[1];return Object(n.useEffect)((function(){s().then((function(e){var t=Object.keys(e);d(t)}))}),[b]),Object(n.useEffect)((function(){c.on("value",(function(e){O(e.val())}),[])}),[]),r.a.createElement(W.Provider,{value:{usersList:m,dataMessages:g,setDataMessages:O,dataUsersOnline:b,createChatKey:function(e){if(!a)throw new Error("myUsername has not been set!");var t=[];return t.push(e,a),t.sort(),t.join("__")},setDataUsersOnline:p}},t)};W.displayName="Firebase Context";var G=function(e){var t=e.backContacts,a=e.className,n=e.setShowFriendAvatar,c=e.user,s=Object(l.g)();return r.a.createElement("section",{className:"".concat("show"===a?"hide":"show"," btn-come-back"),onClick:function(){t("show"),n(c),s.goBack()}},r.a.createElement("svg",{id:"Capa_1",enableBackground:"new 0 0 551.13 551.13",height:"512",viewBox:"0 0 551.13 551.13",width:"512",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"m189.451 275.565 223.897-223.897v-51.668l-275.565 275.565 275.565 275.565v-51.668z"})))};var Z=function(e){var t=e.className,a=e.user,n=e.status,c=a.charAt(0).toUpperCase();return r.a.createElement("section",{className:"avatar ".concat(t,"_avatar")},r.a.createElement("img",{src:"https://i.ibb.co/NtGCFM2/Group-77.png",alt:"user avatar"}),r.a.createElement("section",{className:"avatar-item ".concat(n)},c))},Q=function(e){var t=e.className,a=e.name,n=f()(t,a);return r.a.createElement("section",{className:n},a)};Q.defaultProps={className:"contacts-card__user-name",name:""};var J=Q,$=function(e){var t=e.className,a=e.status,n=e.isActive;return r.a.createElement("section",{className:"".concat(t," ").concat(n)},r.a.createElement("section",{className:a},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"512px",viewBox:"0 -32 512.00011 512",width:"512px"},r.a.createElement("g",null,r.a.createElement("path",{d:"m342.382812 239.351562c-23.039062-35.941406-62.277343-57.402343-104.964843-57.402343s-81.925781 21.460937-104.960938 57.402343l-55.515625 86.605469c-9.210937 14.367188-13.460937 30.96875-12.292968 47.996094 1.167968 17.03125 7.648437 32.890625 18.738281 45.875 11.097656 12.972656 25.761719 21.839844 42.40625 25.644531 16.644531 3.804688 33.707031 2.179688 49.339843-4.691406l1.046876-.464844c39.335937-16.945312 84.285156-16.789062 123.519531.464844 10.121093 4.449219 20.84375 6.699219 31.664062 6.699219 5.882813 0 11.800781-.667969 17.664063-2.003907 16.644531-3.800781 31.308594-12.667968 42.410156-25.644531 11.09375-12.972656 17.578125-28.835937 18.75-45.871093 1.171875-17.035157-3.078125-33.632813-12.289062-48.007813zm0 0","data-original":"#000000",className:"active-path","data-old_color":"#000000",fill:"#ED14DB"}),r.a.createElement("path",{d:"m91.894531 239.238281c16.515625-6.34375 29.0625-19.652343 35.328125-37.476562 5.964844-16.960938 5.476563-36.109375-1.378906-53.921875-6.859375-17.800782-19.335938-32.332032-35.132812-40.921875-16.59375-9.019531-34.824219-10.488281-51.3125-4.132813-33.171876 12.753906-48.394532 53.746094-33.929688 91.398438 11.554688 29.96875 38.503906 48.886718 65.75 48.886718 6.957031 0 13.933594-1.234374 20.675781-3.832031zm0 0","data-original":"#000000",className:"active-path","data-old_color":"#000000",fill:"#ED14DB"}),r.a.createElement("path",{d:"m199.613281 171.386719c41.46875 0 75.207031-38.4375 75.207031-85.683594 0-47.257813-33.738281-85.703125-75.207031-85.703125-41.464843 0-75.199219 38.445312-75.199219 85.703125 0 47.246094 33.734376 85.683594 75.199219 85.683594zm0 0","data-original":"#000000",className:"active-path","data-old_color":"#000000",fill:"#ED14DB"}),r.a.createElement("path",{d:"m329.496094 192.4375h.003906c6.378906 2.117188 12.886719 3.128906 19.367188 3.128906 30.242187 0 59.714843-22.011718 70.960937-55.839844 6.476563-19.472656 6.050781-40.0625-1.199219-57.972656-7.585937-18.75-21.644531-32.359375-39.589844-38.324218-17.949218-5.964844-37.359374-3.476563-54.660156 7-16.527344 10.007812-29.191406 26.246093-35.660156 45.71875-13.652344 41.078124 4.640625 84.273437 40.777344 96.289062zm0 0","data-original":"#000000",className:"active-path","data-old_color":"#000000",fill:"#ED14DB"}),r.a.createElement("path",{d:"m487.875 182.4375-.011719-.011719c-28.597656-21.125-71.367187-11.96875-95.347656 20.421875-23.957031 32.40625-20.210937 75.972656 8.34375 97.113282 10.414063 7.714843 22.71875 11.402343 35.3125 11.402343 21.949219 0 44.785156-11.203125 60.050781-31.804687 23.953125-32.40625 20.210938-75.972656-8.347656-97.121094zm0 0","data-original":"#000000",className:"active-path","data-old_color":"#000000",fill:"#ED14DB"})))))},X=function(e){var t=e.user,a=e.className,c=e.status,s=e.backContacts,l=e.isActiveMessages,i=e.showStatus,u=e.currentUser,m=Object(n.useState)(u),d=Object(o.a)(m,2),f=d[0],h=d[1];Object(n.useEffect)((function(){h(t||u)}),[t]);var b="show"===i?"hide":"show";return r.a.createElement("header",{className:"header"},r.a.createElement(G,{backContacts:s,setShowFriendAvatar:h,user:u,className:l}),r.a.createElement("div",{className:"header-kitty-wrap ".concat(l)},r.a.createElement("img",{className:"header-kitty",src:"https://clipartart.com/images/angery-cat-clipart-3.png",alt:"chat avatar"}),r.a.createElement("h1",{className:"header__chat-name ".concat(i)},"Kitty chat",r.a.createElement("span",null,"by Alex"))),r.a.createElement("div",{className:"header-user-wrap"},r.a.createElement("div",{className:"header-avatar_wrap"},r.a.createElement(Z,{className:"header-avatar",user:f||u||"",status:c}),r.a.createElement(J,{className:a,name:"hide"===l&&t||""})),r.a.createElement($,{className:"".concat(b," header__status"),isActive:"hide"===l&&t||"",status:c})))},Y=function(e){var t=e.author,a=e.text,n=e.timestamp,c=e.user;if(t&&a&&n){var s=new Date(n).toLocaleString("en-GB",{hour:"2-digit",minute:"2-digit"});return r.a.createElement("section",{className:t===c?"my-message-wrap":"friend-message-wrap",key:t+n},r.a.createElement("section",{className:"container-inline"},r.a.createElement("p",null,a),r.a.createElement("section",{className:"message-item__time"},s)))}return null},ee=function(e){var t=e.onClick,a=e.disabled;return r.a.createElement("section",{className:"button-send-wrap"},r.a.createElement("button",{className:"messages-footer__button-send",value:"push",onClick:function(e){return t(e)},disabled:a},"Meow!"))},te=function(e){var t=e.chatKey,a=e.currentUser,c=N.messages,s=Object(n.useState)(!0),l=Object(o.a)(s,2),i=l[0],u=l[1],m=Object(n.useState)(""),d=Object(o.a)(m,2),f=d[0],h=d[1],b=Object(n.useState)(!1),p=Object(o.a)(b,2),v=p[0],E=p[1],g=Object(n.useState)(!1),O=Object(o.a)(g,2),y=O[0],j=O[1];function w(e){e.preventDefault(),c.once("value",(function(){c.child("/".concat(t,"/messages")).push({author:a,timestamp:_.a.database.ServerValue.TIMESTAMP,text:f})})),h("")}function C(e){13===e.keyCode&&j((function(e){return!e})),17===e.keyCode&&E((function(e){return!e})),y&&v&&w(e)}return Object(n.useEffect)((function(){u(f.length<1)}),[f]),Object(n.useEffect)((function(){}),[v,y]),r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"send-area-wrap",onKeyDown:function(e){C(e)},onKeyUp:function(e){C(e)}},r.a.createElement("label",{htmlFor:"messages-footer__send-area"}),r.a.createElement("textarea",{name:"",id:"messages-footer__send-area",className:"messages-footer__send-area",placeholder:"Enter you message and press Ctr+Enter...",autoFocus:!0,required:!0,value:f,onChange:function(e){return h(e.target.value)}})),r.a.createElement(ee,{onClick:w.bind(void 0),disabled:i}))},ae=function(e){var t=e.user,a=e.chatKey,n=e.isActive,c=N.messages,s="show"===n?"hide":"show";return r.a.createElement("article",{className:"messages ".concat(s)},r.a.createElement("main",{className:"messages-text"},r.a.createElement("div",{className:"messages-text_inner"},function(){var e={};return c.on("value",(function(t){e=t.val()})),e[a]?Object.values(e[a].messages).map((function(e,a){return r.a.createElement(Y,{author:e.author,text:e.text,timestamp:e.timestamp,key:e.timestamp+e.author,user:t})})):null}())),r.a.createElement("footer",{className:"messages-footer"},r.a.createElement("form",{action:""},r.a.createElement("section",{className:"form-wrap"},r.a.createElement(te,{currentUser:t,chatKey:a})))))},ne=function(e){var t,a=e.dataMessages,n=(t=a,Object.values(t.messages).reverse()[0].text);return n?r.a.createElement("section",{className:"contacts-card__last-message"},n):null},re=function(e){var t,a=e.dataMessages,n=new Date((t=a,Object.values(t.messages).reverse()[0].timestamp)).toLocaleString("en-GB",{month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return n?r.a.createElement("section",{className:"contacts-card__time-last-message"},n):null},ce=function(e){var t=e.usersList,a=e.currentUser,n=e.dataUsersOnline,c=e.createChatKey,s=e.setShow,o=e.setUserFriend,i=e.setChatKey,u=N.messages,m=Object(l.g)();return r.a.createElement("div",null,t&&a&&n&&function(e){var n={};return u.on("value",(function(e){n=e.val()}),[]),t.map((function(t){var l=c(t);return a===t?null:r.a.createElement("section",{className:"contacts-card",key:"contacts-card_".concat(t),onClick:function(){o(t),i(l),s("hide"),m.push("/home/".concat(l,"/"))}},r.a.createElement(Z,{className:"contacts-card",user:t,key:"contacts-card-avatar_".concat(t),status:e[t]?"status_online":"status_offline"}),r.a.createElement("div",{className:"contacts-card__info"},r.a.createElement("div",{className:"contacts-card__info-items"},r.a.createElement(J,{className:"contacts-card__user-name",name:t,key:"contacts-card__user-name_".concat(t)}),r.a.createElement($,{className:"contacts-card__status",status:e[t]?"status_online":"status_offline",key:"contacts-card__status_".concat(t)})),r.a.createElement("div",{className:"contacts-card__info-items"},n[l]&&r.a.createElement(ne,{dataMessages:n[l],key:"contacts-card__last-message_".concat(t)}),n[l]&&r.a.createElement(re,{dataMessages:n[l],key:"contacts-card__time-last-message_".concat(t)}))))}))}(n))},se=a(37),le=["\u0410 \u043c\u043e\u0433\u043b\u0430 \u0431\u044b\u0442\u044c \u0412\u0430\u0448\u0430 \u0440\u0435\u043a\u043b\u0430\u043c\u0430 ;)"],oe=function(){var e=Object(se.a)(),t=e.result,a=e.dencrypt;return r.a.useEffect((function(){var e=0,t=setInterval((function(){a(le[e]),e=e===le.length-1?0:e+1}),1e3);return function(){return clearInterval(t)}}),[]),r.a.createElement("div",{className:"messages-preloader"},r.a.createElement("h2",{className:"messages-preloader__title"},t))},ie=function(e){var t=e.firebaseInitialized,a=e.dataUsersOnline,c=e.currentUser,s=Object(n.useContext)(W),i=s.usersList,u=s.createChatKey,m=Object(n.useState)("show"),d=Object(o.a)(m,2),h=d[0],b=d[1],p=Object(n.useState)(),v=Object(o.a)(p,2),E=v[0],g=v[1],O=Object(n.useState)(),y=Object(o.a)(O,2),j=y[0],_=y[1],w=Object(n.useState)(),N=Object(o.a)(w,2),C=N[0],k=N[1],x=f()("contacts","contacts-wrap");return Object(n.useEffect)((function(){E&&j&&k(!0)}),[E,j]),t?r.a.createElement(r.a.Fragment,null,r.a.createElement(X,{className:"contacts-card__user-name_in-header",user:E,status:E&&a[E]?"status_online":"status_offline",backContacts:b,isActiveMessages:h,showStatus:h,currentUser:c}),r.a.createElement("main",{className:"main"},r.a.createElement("nav",{className:"".concat(x," ").concat(h)},r.a.createElement(ce,{usersList:i,currentUser:c,dataUsersOnline:a,createChatKey:u,setShow:b,setUserFriend:g,setChatKey:_})),C&&r.a.createElement(ae,{user:c,chatKey:j,isActive:h})||r.a.createElement(oe,null))):r.a.createElement(l.a,{to:"/"})},ue=Object(l.h)((function(){var e=Object(n.useContext)(i),t=e.currentUser,a=e.setCurrentUser,c=Object(n.useContext)(C),s=c.showPreloader,u=c.hidePreloader,m=Object(n.useState)(null),d=Object(o.a)(m,2),f=d[0],h=d[1],b=Object(n.useState)(!0),p=Object(o.a)(b,2),v=p[0],E=p[1],g=N.getDataUsersOnline,O=N.presence;return Object(n.useEffect)((function(){N.isInitialized().then((function(e){a((function(){return e.displayName})),E(e)}))})),Object(n.useEffect)((function(){var e;(null!==(e=!f)&&void 0!==e?e:t)&&(O.child("/".concat(t)).update({userName:t,onlineStatus:!0}),O.child("/".concat(t)).onDisconnect().remove(),O.on("child_added",(function(e){g().then((function(e){h(e)}))})),O.on("child_removed",(function(e){g().then((function(e){h(e)}))})))})),Object(n.useEffect)((function(){v?u():s()}),[]),v?r.a.createElement(ie,{firebaseInitialized:v,dataUsersOnline:f,currentUser:t}):r.a.createElement(l.a,{to:"/"})}));var me=function(){return r.a.createElement(u,null,r.a.createElement(V,null,r.a.createElement(q,null),r.a.createElement(R,null),r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/",exact:!0,component:K}),r.a.createElement(l.b,{path:"/home/",component:ue}),r.a.createElement(l.a,{to:"/"}))))},de=a(13);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var fe,he,be=a(11),pe="SHOW",ve="HIDE",Ee="SHOW",ge="SHOW",Oe="HIDE",ye=(fe={},Object(be.a)(fe,pe,(function(e,t){return t.payload})),Object(be.a)(fe,ve,(function(){return null})),Object(be.a)(fe,Ee,(function(e,t){return t.payload})),Object(be.a)(fe,"DEFAULT",(function(e){return e})),fe),je=function(e,t){return(ye[t.type]||ye.DEFAULT)(e,t)},_e=(he={},Object(be.a)(he,ge,(function(e,t){return t.payload})),Object(be.a)(he,Oe,(function(){return null})),Object(be.a)(he,"DEFAULT",(function(e){return e})),he),we=function(e,t){return(_e[t.type]||_e.DEFAULT)(e,t)},Ne=r.a.createElement(de.a,null,r.a.createElement((function(e){var t=e.children,a=Object(n.useReducer)(we,null),c=Object(o.a)(a,2),s=c[0],l=c[1];return r.a.createElement(C.Provider,{value:{showPreloader:function(){return l({type:Oe})},hidePreloader:function(e){var t=1e3*e;e||(t=1500),setTimeout((function(){l({type:ge,payload:{second:e}})}),t)},state:s}},t)}),null,r.a.createElement((function(e){var t=e.children,a=Object(n.useReducer)(je,null),c=Object(o.a)(a,2),s=c[0],l=c[1];return r.a.createElement(H.Provider,{value:{modalHide:function(){return l({type:ve})},modalShow:function(e,t){l({type:pe,payload:{title:e,text:t}})},modalShowHide:function(e,t,a){l({type:Ee,payload:{title:e,text:t,count:a}})},modalState:s}},t)}),null,r.a.createElement(me,null))));s.a.render(Ne,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[40,1,2]]]);
//# sourceMappingURL=main.1d38d033.chunk.js.map